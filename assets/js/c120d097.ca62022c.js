"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[180],{3905:function(a,e,t){t.d(e,{Zo:function(){return o},kt:function(){return k}});var n=t(7294);function s(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function m(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.push.apply(t,n)}return t}function r(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach((function(e){s(a,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}))}return a}function p(a,e){if(null==a)return{};var t,n,s=function(a,e){if(null==a)return{};var t,n,s={},m=Object.keys(a);for(n=0;n<m.length;n++)t=m[n],e.indexOf(t)>=0||(s[t]=a[t]);return s}(a,e);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(a);for(n=0;n<m.length;n++)t=m[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(a,t)&&(s[t]=a[t])}return s}var i=n.createContext({}),l=function(a){var e=n.useContext(i),t=e;return a&&(t="function"==typeof a?a(e):r(r({},e),a)),t},o=function(a){var e=l(a.components);return n.createElement(i.Provider,{value:e},a.children)},c={inlineCode:"code",wrapper:function(a){var e=a.children;return n.createElement(n.Fragment,{},e)}},N=n.forwardRef((function(a,e){var t=a.components,s=a.mdxType,m=a.originalType,i=a.parentName,o=p(a,["components","mdxType","originalType","parentName"]),N=l(t),k=s,h=N["".concat(i,".").concat(k)]||N[k]||c[k]||m;return t?n.createElement(h,r(r({ref:e},o),{},{components:t})):n.createElement(h,r({ref:e},o))}));function k(a,e){var t=arguments,s=e&&e.mdxType;if("string"==typeof a||s){var m=t.length,r=new Array(m);r[0]=N;var p={};for(var i in e)hasOwnProperty.call(e,i)&&(p[i]=e[i]);p.originalType=a,p.mdxType="string"==typeof a?a:s,r[1]=p;for(var l=2;l<m;l++)r[l]=t[l];return n.createElement.apply(null,r)}return n.createElement.apply(null,t)}N.displayName="MDXCreateElement"},6022:function(a,e,t){t.r(e),t.d(e,{frontMatter:function(){return p},metadata:function(){return i},toc:function(){return l},default:function(){return c}});var n=t(7462),s=t(3366),m=(t(7294),t(3905)),r=["components"],p={sidebar_position:3},i={unversionedId:"tutorials/switch-and-transitions",id:"tutorials/switch-and-transitions",isDocsHomePage:!1,title:"Switches and transitions",description:"A lot of signals can have anomalies and special events that happen on specific timeframes:",source:"@site/docs/tutorials/switch-and-transitions.md",sourceDirName:"tutorials",slug:"/tutorials/switch-and-transitions",permalink:"/docs/tutorials/switch-and-transitions",editUrl:"https://github.com/cyrilou242/mockseries/edit/master/website/docs/tutorials/switch-and-transitions.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Daily, Weekly and Yearly seasonalities.",permalink:"/docs/tutorials/seasonality-daily-weekly-yearly"},next:{title:"mockseries.interaction.additive_interaction",permalink:"/docs/API Reference/mockseries/interaction/additive_interaction"}},l=[{value:"Switch and revert",id:"switch-and-revert",children:[]},{value:"Transitions",id:"transitions",children:[{value:"Linear transition",id:"linear-transition",children:[]},{value:"Lambda transition",id:"lambda-transition",children:[]}]}],o={toc:l};function c(a){var e=a.components,p=(0,s.Z)(a,r);return(0,m.kt)("wrapper",(0,n.Z)({},o,p,{components:e,mdxType:"MDXLayout"}),(0,m.kt)("p",null,"A lot of signals can have anomalies and special events that happen on specific timeframes: "),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"a promotion gives a temporary boost in sales"),(0,m.kt)("li",{parentName:"ul"},"an outage results in a loss of 90% of the data volume"),(0,m.kt)("li",{parentName:"ul"},"a device gets broken and generates more noise"),(0,m.kt)("li",{parentName:"ul"},"the creation of a new shop adds a new linear trend to the revenue of a company "),(0,m.kt)("li",{parentName:"ul"},"a holiday makes a seasonality pattern change")),(0,m.kt)("p",null,"These events can happen in two ways:"),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"the signal suddenly changes: ",(0,m.kt)("strong",{parentName:"li"},"instant change"),"."),(0,m.kt)("li",{parentName:"ul"},"the signal gradually changes to reach a new value: ",(0,m.kt)("strong",{parentName:"li"},"change with transition period"),".")),(0,m.kt)("p",null,"In ",(0,m.kt)("strong",{parentName:"p"},"mockseries"),", this kind of change is called a ",(0,m.kt)("strong",{parentName:"p"},"switch"),".\nLet's see how to create such switches, and how to create custom transitions. "),(0,m.kt)("h2",{id:"switch-and-revert"},"Switch and revert"),(0,m.kt)("p",null,"Consider a simple switch: the base value is 0, and it changes to 1 after 2 days."),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-python"},'from datetime import datetime, timedelta\n\n# plotting utilities for the whole tutorial \nimport matplotlib.pyplot as plt\nplt.rcParams["figure.figsize"] = (20,7)\n\nfrom mockseries.trend import Switch\n\ntoday_midnight = datetime.combine(datetime.now().date(), datetime.min.time())\n\nswitch = Switch(\n    start_time=today_midnight + timedelta(days=2),\n    base_value=0, \n    switch_value=1,\n    )\nswitch.preview_week()   \n')),(0,m.kt)("p",null,(0,m.kt)("img",{alt:"png",src:t(5995).Z})),(0,m.kt)("p",null,"You can configure the switch to revert to the base value.",(0,m.kt)("br",{parentName:"p"}),"\n","Let's revert 2 days after the change."),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-python"},"switch_and_revert = Switch(\n    start_time=today_midnight + timedelta(days=2),\n    base_value=0, \n    switch_value=1,\n    stop_time=today_midnight + timedelta(days=4),\n    )\nswitch_and_revert.preview_week()  \n")),(0,m.kt)("p",null,(0,m.kt)("img",{alt:"png",src:t(3014).Z})),(0,m.kt)("p",null,"Thanks to signal combinations, this simple switch allows powerful simulations, for instance:  "),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"the opening of a new shop adds a new constant value to the revenue of a company ")),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-python"},"from mockseries.trend import LinearTrend\n\nprevious_revenue = LinearTrend(coefficient=2, time_unit=timedelta(days=1), flat_base=100)\nnew_revenue = 2\nrevenue_signal = previous_revenue + (new_revenue * switch)\n\nrevenue_signal.preview_week()\n\n")),(0,m.kt)("p",null,(0,m.kt)("img",{alt:"png",src:t(3631).Z})),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"a device gets broken, it generates noise, then is fixed: ")),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-python"},"from mockseries.noise import GaussianNoise\nusual_device_value = 10  ## brodcasted to flat trend\nnoise = GaussianNoise()\n\nsignal_with_broken_device = usual_device_value + switch_and_revert * noise\n\nsignal_with_broken_device.preview_week()\n")),(0,m.kt)("p",null,(0,m.kt)("img",{alt:"png",src:t(1982).Z})),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"an outage results in a loss of 90% of a seasonal data volume.")),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-python"},"from mockseries.seasonality import SinusoidalSeasonality\n\nusual_volume = SinusoidalSeasonality(amplitude=10, period=timedelta(days=1))\n\noutage_switch = Switch(\n    start_time=today_midnight + timedelta(days=4),\n    base_value=1, \n    switch_value=0.1,\n    stop_time=today_midnight + timedelta(days=6),\n    )\nvolume_with_outage = usual_volume * outage_switch\n\nvolume_with_outage.preview_week()\n")),(0,m.kt)("p",null,(0,m.kt)("img",{alt:"png",src:t(2241).Z})),(0,m.kt)("h2",{id:"transitions"},"Transitions"),(0,m.kt)("p",null,"For the moment, we've only seen ",(0,m.kt)("strong",{parentName:"p"},"instant transitions"),". This is the default behavior of the ",(0,m.kt)("a",{parentName:"p",href:"../API%20Reference/mockseries/trend/switch"},"Switch"),".",(0,m.kt)("br",{parentName:"p"}),"\n","In real life, many change events have specific transitions behavior.\nImagine you drive at 90km/hour, and you enter an highway: you change your speed to 130km/hour.\nAt the end of the highway, you get back to 90km/hour. These changes are definitely not instant ! You accelerate: this is the transition."),(0,m.kt)("p",null,"A transition has:"),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"a window: for the car example, it's the time to change from 90 to 130k/hour"),(0,m.kt)("li",{parentName:"ul"},"a transition function: the shape of the change from 90 to 130km/hour (it most likely is not linear)",(0,m.kt)("br",{parentName:"li"}),"Those depends on the car and the way you drive.   ")),(0,m.kt)("h3",{id:"linear-transition"},"Linear transition"),(0,m.kt)("p",null,"First, let's consider the acceleration of the car is linear."),(0,m.kt)("p",null,"The timeseries will be:"),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"car is at 90km/hour"),(0,m.kt)("li",{parentName:"ul"},"car accelerates ",(0,m.kt)("strong",{parentName:"li"},"linearly"),", it reaches 130km/hour in ",(0,m.kt)("strong",{parentName:"li"},"10 seconds")),(0,m.kt)("li",{parentName:"ul"},"car is at 130km/hour"),(0,m.kt)("li",{parentName:"ul"},"car decelerates ",(0,m.kt)("strong",{parentName:"li"},"linearly"),", reaches 90km/hour in ",(0,m.kt)("strong",{parentName:"li"},"5 seconds")),(0,m.kt)("li",{parentName:"ul"},"car is at 90km/hour")),(0,m.kt)("p",null,"To implement this in ",(0,m.kt)("strong",{parentName:"p"},"mockseries"),", we pass a ",(0,m.kt)("a",{parentName:"p",href:"../API%20Reference/mockseries/transition/transition"},"Transition")," object to the switch signal.\nThe ",(0,m.kt)("a",{parentName:"p",href:"../API%20Reference/mockseries/transition/transition"},"Transition")," describes the time and the shape of the transition.  "),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-python"},"from mockseries.transition import LinearTransition\n\nlinear_transition = LinearTransition(\n    transition_window=timedelta(seconds=10),\n    stop_window=timedelta(seconds=5),\n)\n\nnow = datetime.now()\n\nspeed_switch = Switch(\n    start_time=now + timedelta(seconds=30),\n    base_value=90, \n    switch_value=130,\n    stop_time=now + timedelta(minutes=1, seconds=30),\n    transition=linear_transition\n    )\n\nspeed_switch.preview_minute(num_minutes=2)\n")),(0,m.kt)("p",null,(0,m.kt)("img",{alt:"png",src:t(1124).Z})),(0,m.kt)("h3",{id:"lambda-transition"},"Lambda transition"),(0,m.kt)("p",null,"Above looks nice, but we want to use more complex transitions.\nThe ",(0,m.kt)("a",{parentName:"p",href:"../API%20Reference/mockseries/transition/lambda_transition"},"LambdaTransition")," allows to use custom transition functions."),(0,m.kt)("p",null,"The key idea of the lambda transition is that the transition behavior can be defined as a function such as\n",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mn",{parentName:"mrow"},"0"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"0")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"t(0) = 0")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},"0"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"0"))))),"  (the very beginning of the transition) and ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mn",{parentName:"mrow"},"1"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"1")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"t(1) = 1")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"1")))))," (the  end of the transition).\nThis transition function is then rescaled to take into account the transition time and the base and switch values.",(0,m.kt)("br",{parentName:"p"}),"\n","You just need a rough shape of the transition and define it on a ","[","0-1","]"," range.   "),(0,m.kt)("p",null,"Let's take the car example with:"),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"a perfect, smooth acceleration: accelerate a lot at the beginning then reach the new speed slowly",(0,m.kt)("br",{parentName:"li"}),(0,m.kt)("span",{parentName:"li",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"a"),(0,m.kt)("mi",{parentName:"mrow"},"c"),(0,m.kt)("mi",{parentName:"mrow"},"c"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mi",{parentName:"mrow"},"l"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mi",{parentName:"mrow"},"r"),(0,m.kt)("mi",{parentName:"mrow"},"a"),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mi",{parentName:"mrow"},"i"),(0,m.kt)("mi",{parentName:"mrow"},"o"),(0,m.kt)("mi",{parentName:"mrow"},"n"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mi",{parentName:"mrow"},"x"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"1"),(0,m.kt)("mo",{parentName:"mrow"},"\u2212"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mn",{parentName:"mrow"},"1"),(0,m.kt)("mo",{parentName:"mrow"},"\u2212"),(0,m.kt)("mi",{parentName:"mrow"},"x"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"\u2217"),(0,m.kt)("mo",{parentName:"mrow"},"\u2217"),(0,m.kt)("mn",{parentName:"mrow"},"4")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"acceleration(x) = 1 - (1-x)**4")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"a"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"c"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"c"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.01968em"}},"l"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"a"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.72777em",verticalAlign:"-0.08333em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u2217"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u2217"),(0,m.kt)("span",{parentName:"span",className:"mord"},"4"))))),"  "),(0,m.kt)("li",{parentName:"ul"},"a brutal deceleration: decelerate too much, then get back to the base speed",(0,m.kt)("br",{parentName:"li"}),(0,m.kt)("span",{parentName:"li",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"d"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mi",{parentName:"mrow"},"c"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mi",{parentName:"mrow"},"l"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mi",{parentName:"mrow"},"r"),(0,m.kt)("mi",{parentName:"mrow"},"a"),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mi",{parentName:"mrow"},"i"),(0,m.kt)("mi",{parentName:"mrow"},"o"),(0,m.kt)("mi",{parentName:"mrow"},"n"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mi",{parentName:"mrow"},"x"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"3.11111"),(0,m.kt)("mo",{parentName:"mrow"},"\u2217"),(0,m.kt)("msup",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msup"},"x"),(0,m.kt)("mn",{parentName:"msup"},"3")),(0,m.kt)("mo",{parentName:"mrow"},"\u2212"),(0,m.kt)("mn",{parentName:"mrow"},"7.86667"),(0,m.kt)("mo",{parentName:"mrow"},"\u2217"),(0,m.kt)("msup",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msup"},"x"),(0,m.kt)("mn",{parentName:"msup"},"2")),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mn",{parentName:"mrow"},"5.75556"),(0,m.kt)("mo",{parentName:"mrow"},"\u2217"),(0,m.kt)("mi",{parentName:"mrow"},"x")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"deceleration(x) = 3.11111 * x^3 - 7.86667 * x^2 + 5.75556 * x")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"d"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"c"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.01968em"}},"l"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.02778em"}},"r"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"a"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"3"),(0,m.kt)("span",{parentName:"span",className:"mord"},"."),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mord"},"1"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u2217"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.897438em",verticalAlign:"-0.08333em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141079999999999em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"3")))))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"7"),(0,m.kt)("span",{parentName:"span",className:"mord"},"."),(0,m.kt)("span",{parentName:"span",className:"mord"},"8"),(0,m.kt)("span",{parentName:"span",className:"mord"},"6"),(0,m.kt)("span",{parentName:"span",className:"mord"},"6"),(0,m.kt)("span",{parentName:"span",className:"mord"},"6"),(0,m.kt)("span",{parentName:"span",className:"mord"},"7"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u2217"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.897438em",verticalAlign:"-0.08333em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141079999999999em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"2")))))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"5"),(0,m.kt)("span",{parentName:"span",className:"mord"},"."),(0,m.kt)("span",{parentName:"span",className:"mord"},"7"),(0,m.kt)("span",{parentName:"span",className:"mord"},"5"),(0,m.kt)("span",{parentName:"span",className:"mord"},"5"),(0,m.kt)("span",{parentName:"span",className:"mord"},"5"),(0,m.kt)("span",{parentName:"span",className:"mord"},"6"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u2217"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"x"))))),"  (believe me for this one)")),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-python"},"from mockseries.transition  import LambdaTransition \n\nacceleration = lambda x : 1 - (1-x)**4\ndeceleration = lambda x: 3.11111 * x**3 - 7.86667 * x**2 + 5.75556 * x\n\nrealistic_transition = LambdaTransition(\n    transition_window=timedelta(seconds=10),\n    transition_function=acceleration,\n    stop_window=timedelta(seconds=20),\n    stop_function=deceleration\n)\n\nnow = datetime.now()\n\nrealistic_speed = Switch(\n    start_time= now + timedelta(seconds=30),\n    base_value=90, \n    switch_value=130,\n    stop_time=now + timedelta(minutes=1, seconds=30),\n    transition=realistic_transition\n    )\n\nrealistic_speed.preview_minute(num_minutes=2)\n")),(0,m.kt)("p",null,(0,m.kt)("img",{alt:"png",src:t(8007).Z})),(0,m.kt)("p",null,"That's it! You now know how to:"),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"define switches"),(0,m.kt)("li",{parentName:"ul"},"define complex transitions ")),(0,m.kt)("p",null,"To go further:"),(0,m.kt)("ul",null,(0,m.kt)("li",{parentName:"ul"},"implement more realistic transitions function (checkout some automotive course)"),(0,m.kt)("li",{parentName:"ul"},"change the transition window size and see how it impacts the timeseries ")),(0,m.kt)("p",null,"Go to the next page to explore random switches. This is helpful to simulate random outages."))}c.isMDXComponent=!0},2241:function(a,e,t){e.Z=t.p+"assets/images/switch-and-transitions_10_0-61a27d68e9d11ba826834469191c897b.png"},1124:function(a,e,t){e.Z=t.p+"assets/images/switch-and-transitions_12_0-5081e3fcb5ae3e80201bc9592d4dd0e2.png"},8007:function(a,e,t){e.Z=t.p+"assets/images/switch-and-transitions_14_0-ff104ffcc227e8598797ba6235311f05.png"},5995:function(a,e,t){e.Z=t.p+"assets/images/switch-and-transitions_2_0-129f26abb6fa3fcd10457be2af2943d4.png"},3014:function(a,e,t){e.Z=t.p+"assets/images/switch-and-transitions_4_0-7aa4bb4adc20fb3c51c46430415882ff.png"},3631:function(a,e,t){e.Z=t.p+"assets/images/switch-and-transitions_6_0-e2dff81dc2eb9e9723fb27bfa8b04942.png"},1982:function(a,e,t){e.Z=t.p+"assets/images/switch-and-transitions_8_0-8dc55a512c65f40ecf79eb9da696f6d5.png"}}]);